<%@ page language="java" contentType="text/html; charset=EUC-KR" pageEncoding="EUC-KR"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi" />
<title>LG chem : LG aesthetics</title>
<link rel="stylesheet" type="text/css" href="/resource/css/front/import.css" />
<script type="text/javascript" src="/resource/js/jquery/jquery-1.12.4.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript"  src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script type="text/javascript" src="/resource/js/front/ui.js"></script>
<script type="text/javascript">
	//<![CDATA[
	// 필수 입력정보인 아이디, 비밀번호가 입력되었는지 확인하는 함수
	function checkValue() {
		
		if (!document.userInfo.email.value) {
			alert("이메일 형식의 아이디를 입력하세요.");
			return false;
		}
		
		if (document.userInfo.idChk.value == "N") {
			alert("id 중복 확인 하세요.");
			return false;
		}
		
		if (!document.userInfo.password.value) {
			alert("비밀번호를 입력하세요.");
			return false;
		}

		// 비밀번호와 비밀번호 확인에 입력된 값이 동일한지 확인
		if (document.userInfo.password.value != document.userInfo.passwordCheck.value) {
			alert("비밀번호를 동일하게 입력하세요.");
			return false;
		}
		
		if (!document.userInfo.nameFirst.value) {
			alert("nameFirst을 등록하세요.");
			return false;
		}
		
		if (!document.userInfo.nameLast.value) {
			alert("nameLast을 등록하세요.");
			return false;
		}
		
		if (!$("select[name=countryCode]").val()) {
			alert("country를 선택하세요.");
			return false;
		}

		// 전공의 케이스
		if ($("input:radio[id=userTypePyh]").is(":checked") == true) {
			if (!$("select[name=specialCode]").val()) {
				alert("special을 선택하세요.");
				return false;
			} 
			if (!document.userInfo.uploadFile_1.value) {
				alert("의사 면허증 image를 등록하세요.");
				return false;
			}
			if (!document.userInfo.uploadFile_2.value) {
				alert("의사 면허증2 image를 등록하세요.");
				return false;
			}
		}
		
		// 파트너 케이스
		if ($("input:radio[id=userTypePar]").is(":checked") == true) {		
			if (!document.userInfo.partnerName.value) {
				alert("partner를 등록하세요.");
				return false;
			}
		}

		if ($("input:checkbox[name=consentYn]").is(":checked") == false) {
			alert("동의 하기를 체크 하세요.");
			return false;
		}
	}

	// 취소 버튼 클릭시 로그인 화면으로 이동
	function goLoginForm() {
		location.href = "/common/login/login.do";
	}

	// 파일 저장
	function fnSave() {
		document.userInfo.action = "<c:url value='/common/login/insertFileInfo.do'/>";
		document.userInfo.submit();
	}
	
	// 아이디 중복 체크
 	function fnIdChk() {
		/* if (!document.userInfo.email.value) {
			alert("아이디를 입력하세요.");
			return false;
		}
		var asValue = document.userInfo.email.value;
		var regExp = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
		if (!regExp.test(asValue)) {
			alert("이메일 형식의 아이디를 입력하세요.");
			return false; // 형식에 맞는 경우 true 리턴	
		} */
		$.ajax({
			url : "/common/user/idChk.do",
			type : "post",
			dataType : "json",
			data : {"email" : $("#email").val()},
			success : function(data) {
				if (data == 1) {
					$("#idChk").attr("value", "N");
					alert("This email address cannot be used.");
				} else if (data == 0) {
					$("#idChk").attr("value", "Y");
					alert("사용가능한 이메일 입니다.");
				}
			},
		})
	}
	
	/* ============================================== */
	
	// userType으로 div구분
	function fnDispList(selectList) {
		
		if (selectList == "0") { // Physician
			trPhysician_1.style.display='block';
			trPhysician_2.style.display='block';
			trPhysician_3.style.display='block';
			trPhysician_4.style.display='block';
			trPhysician_5.style.display='block';
			trPhysician_6.style.display='block';
			trPartner.style.display='none';
	
			document.getElementsByName("partnerName")[0].value = null;

		} else { // Partner
			trPhysician_1.style.display='none';
			trPhysician_2.style.display='none';
			trPhysician_3.style.display='none';
			trPhysician_4.style.display='none';
			trPhysician_5.style.display='none';
			trPhysician_6.style.display='none';
			trPartner.style.display='block';
			
			document.getElementsByName("specialCode")[0].value = "";
			document.getElementsByName("uploadFile_1")[0].value = null;
			document.getElementsByName("uploadFile_2")[0].value = null;
			document.getElementsByName("hpName")[0].value = null;
			document.getElementsByName("hpAddress")[0].value = null;
			document.getElementsByName("hpZipcode")[0].value = null;
		}
	}
	//]]>
</script>
	<!-- [S] wrap : ID 값은 화면 ID와 동일하게 적용 -->
	<div id="FR010301-05" class="default-section">
		<!-- [S] contents -->
		<section class="content-section">
			<header class="content-header">
				<h2 class="content-tit">New Account</h2>
				<a href="#none" class="link-btn"><i class="fas fa-angle-left"></i>Back to sign in</a>
			</header>
			<!-- [S] 게시물 등록 --> 
			<article class="board-wrap" data-board-type="form-write">
				<h3 class="article-tit">Personal Information</h3>
				<p class="article-txt" data-text-style="essential">There are required fields in this form marked</p>
				
				<form method="post" action="/common/user/insertUser.do" name="userInfo" id="userInfo" onsubmit="return checkValue()" enctype="multipart/form-data">
					<input type="hidden" name="stateCode" id="stateCode" value="01" placeholder ="요청 상태 코드 : 01"/>
					<input type="hidden" name="createId" id="createId" value="0"/>
					<input type="hidden" name="updateId" id="updateId" value="0"/>
					<input type="hidden" name="idChk" id="idChk" value="N"/>
					<div class="board-area">
						<table class="default-table">
							<caption>Personal Information 입력</caption>
							<colgroup>
								<col style="width:193px;" />
								<col style="width:auto;" />
							</colgroup>
							
							<tbody>
								<tr>
									<th scale="col" data-text-style="essential">Position</th>
									<td>
										<ul class="form" data-form="radio">
											<li>
												<input type="radio" class="check-form" id="radio01" name="userType" data-radio-key="doctor" value="DR02" onclick="fnDispList('0');" checked />
												<label for="radio01" class="label-form">Physician</label>
											</li>
											<li>
												<input type="radio" class="check-form" id="radio02" name="userType" data-radio-key="partner" value="PT01" onclick="fnDispList('1');" />
												<label for="radio02" class="label-form">Partner, LG Chem employee</label>
											</li>
										</ul>
									</td>
								</tr>
								
								<tr>
									<th scale="col" data-text-style="essential">Email address</th>
									<td>
										<div class="form-area">
											<div class="form" data-mult-form="input-btn">
												<!-- 일치하지 않을 때 .invalid 추가 및 .invalid-txt 영역 노출 -->
												<input type="text" name="email" id="email" class="input-form invalid" placeholder="Enter your email address" />
												<button type="button" class="board-sub-btn" onclick="fnIdChk();">Check</button>
											</div>
											<p class="invalid-txt">이메일이 일치하지 않습니다.</p>
										</div>
									</td>
								</tr>
								
								<tr>
									<th scale="col" data-text-style="essential">password</th>
									<td>
										<div class="form-area" data-combine-form="column-2-form">
											<div class="form" data-mult-form="password">
												<input type="password" name="password" id="password" class="input-form" placeholder="Enter Password">
												<!-- 비밀번호 보기 : <i class="fas fa-eye"></i> -->
												<button type="button" class="icon-btn"><i class="far fa-eye"></i></button>
											</div>
											
											<div class="form" data-mult-form="password">
												<input type="password" name="passwordCheck" id="passwordCheck" class="input-form" placeholder="Confirm Password">
												<button type="button" class="icon-btn"><i class="far fa-eye"></i></button>
											</div>
											
											<p class="form-txt">The password must have at least 8 characters, at least 1 special character</p>
										</div>
									</td>
								</tr>
	
								<tr>
									<th scale="col" data-text-style="essential">Name</th>
									<td>
										<div class="form-area" data-combine-form="column-2-form">
											<div class="form"><input type="text" name="nameFirst" id="nameFirst" class="input-form" placeholder="First name" /></div>
											<div class="form"><input type="text" name="nameLast" id="nameLast" class="input-form" placeholder="Last name" /></div>
										</div>
									</td>
								</tr>
								
								<tr>
									<th scale="col" data-text-style="essential">Country</th>
									<td>
										<div class="form" data-form="select">
											<select name="countryCode" id="countryCode" class="select-form" required>
												<option value="" hidden>-- Select a country  --</option>
												<c:forEach var="countryCode" items="${countryCodeList}" varStatus="status">
													<option value="${countryCode.code}"> <c:out value="${countryCode.value}"/> </option>
									     		</c:forEach>
											</select>
											<i class="fas fa-angle-down"></i>
										</div>
									</td>
								</tr>
								
								<tr data-row-key="doctor" style="display:" id="trPhysician_1">
									<th scale="col" data-text-style="essential">Specialty</th>
									<td>
										<div class="form" data-form="select">
											<select name="specialCode" id="specialCode" class="select-form" required>
												<option value="" hidden>-- Select a country  --</option>
												<c:forEach var="specialCode" items="${specialCodeList}" varStatus="status">
													<option value="${specialCode.code}"> <c:out value="${specialCode.value}"/> </option>
									     		</c:forEach>
											</select>
											<i class="fas fa-angle-down"></i>
										</div>
									</td>
								</tr>
								
								<!-- [S] 라디오 [data-radio-key="doctor"] : [data-row-key="doctor"] 연결되는 tr의 data- 값 -->
								<tr style="display:" id="trPhysician_2">
									<th scale="col" data-text-style="essential">Physician ID</th>
									<td>
										<p class="note-txt">Please provide a scan or photo of your physician ID and your photo that can prove that the ID belongs to you.</p>
										<div class="form" data-mult-form="file">
											<input type="text" class="input-form" />
											<input type="file" id="uploadFile_1" name="uploadFile_1" class="file-form" />
											<label for="uploadFile_1" class="file-label">Select file</label>
										</div>
									
										<span class="img-area"><img src="/resource/images/front/contents/img-physician-example.png" alt="" /></span>
									</td>
								</tr>
								
								<tr data-row-key="doctor" style="display:" id="trPhysician_3">
									<th scale="col" data-text-style="essential">Your photo</th>
									<td>
										<div class="form-area">
											<div class="form" data-mult-form="file">
												<input type="text" class="input-form" />
												<input type="file" id="uploadFile_2" name="uploadFile_2" class="file-form" />
												<label for="uploadFile_2" class="file-label">Select file</label>
											</div>
											<p class="form-txt">Please upload your picture.</p>
										</div>
										
										<span class="img-area"><img src="/resource/images/front/contents/img-photo-example.png" alt="" /></span>
									</td>
								</tr>
								<!-- [E] 라디오 [data-radio-key="doctor"] -->
								
								<!-- [S] 라디오 [data-radio-key="partner"] : [data-row-key="partner"] 연결되는 tr의 data- 값 -->
								<tr style="display:none" id="trPartner">
									<th scale="col" data-text-style="essential">Partner name</th>
									<td><div class="form"><input type="text" name="partnerName" id="partnerName" class="input-form" placeholder="Enter Partner name" /></div></td>
								</tr>
								<!-- [E] 라디오 [data-radio-key="partner"] -->
							</tbody>
						</table>
					</div>
					
					<!-- [S] 라디오 [data-radio-key="doctor"] : [data-row-key="doctor"] 연결되는 tr의 data- 값 -->
					<h3 class="article-tit" data-row-key="doctor">Additional Information</h3>
					<div class="board-area" data-row-key="doctor">
						<table class="default-table">
							<caption>Additional Information</caption>
							<colgroup>
								<col style="width:193px;" />
								<col style="width:auto;" />
							</colgroup>
							
							<tbody>
								<tr style="display:" id="trPhysician_4">
									<th scale="col" data-text-style="essential">Clinic Name</th>
									<td><div class="form"><input type="text" name="hpName" id="hpName" class="input-form" placeholder="Enter your clinic name" /></div></td>
								</tr>
								
								<tr style="display:" id="trPhysician_5">
									<th scale="col" data-text-style="essential">Clinic Address</th>
									<td><div class="form"><input type="text" name="hpAdd" id="hpAdd" class="input-form" placeholder="Enter your clinic address" /></div></td>
								</tr>
								
								<tr style="display:" id="trPhysician_6">
									<th scale="col" data-text-style="essential">Clinic Postcode / Zip</th>
									<td><div class="form"><input type="text" name="hpZipcode" id="hpZipcode" class="input-form" placeholder="Enter your clinic postcode" /></div></td>
								</tr>
							</tbody>
						</table>
					</div>
					<!-- [E] 라디오 [data-radio-key="doctor"] -->
					
					<h3 class="article-tit">Legal requirements.</h3>
					<section class="terms-section">
						<h2 class="terms-tit">Terms of Use</h2>
						<div class="terms-content">
							<div class="text-area">
								<strong class="tit">General Terms and Conditions for Service Use</strong>
								<p class="txt">The following provisions are to specify the General Terms and Conditions for Service Use of LG ESS Battery Website provided by LG Chem, Ltd..<br />Please verify the general terms and conditions before using the services.</p>
	
								<strong class="tit">Chapter 1. General Provisions</strong>
								<p class="txt">The following provisions are to specify the General Terms and Conditions for Service Use of LG ESS Battery Website provided by LG Chem, Ltd..<br /></p>
							</div>
						</div>
	
						<h2 class="terms-tit">Privacy Policy</h2>
						<div class="terms-content">
							<div class="text-area">
								<strong class="tit">General Terms and Conditions for Service Use</strong>
								<p class="txt">The following provisions are to specify the General Terms and Conditions for Service Use of LG ESS Battery Website provided by LG Chem, Ltd..<br />Please verify the general terms and conditions before using the services.</p>
	
								<strong class="tit">Chapter 1. General Provisions</strong>
								<p class="txt">The following provisions are to specify the General Terms and Conditions for Service Use of LG ESS Battery Website provided by LG Chem, Ltd..<br /></p>
							</div>
						</div>
	
						<h2 class="terms-tit">Consent to additional marketing information (optional)</h2>
						<div class="terms-content">
							<div class="text-area">
								<strong class="tit">General Terms and Conditions for Service Use</strong>
								<p class="txt">The following provisions are to specify the General Terms and Conditions for Service Use of LG ESS Battery Website provided by LG Chem, Ltd..<br />Please verify the general terms and conditions before using the services.</p>
	
								<strong class="tit">Chapter 1. General Provisions</strong>
								<p class="txt">The following provisions are to specify the General Terms and Conditions for Service Use of LG ESS Battery Website provided by LG Chem, Ltd..<br /></p>
							</div>
						</div>
					</section>
					
					<section class="terms-section">
						<ul class="form-area">
							<li>
								<strong class="form-tit">Privacy Policy</strong>
								<div class="form" data-form="checkbox" data-text-style="essential">
									<input type="checkbox" class="check-form" id="checkbox01" name="consentYn" checked>
									<label for="checkbox01" class="label-form">I accept the Terms of Use.</label>
								</div>
							</li>
							<li>
								<strong class="form-tit">accept to receive information from LG Chem.</strong>
								<div class="form" data-form="checkbox">
									<input type="checkbox" class="check-form" id="checkbox02" name="consentYn">
									<label for="checkbox02" class="label-form">I agree that LG Chem may contact me with offers and promotions available from LG Chem.</label>
								</div>
							</li>
						</ul>					
					</section>
					
					<div class="submit-area">
					 	<button type="button" class="main-btn" onclick="goLoginForm()">Cancel</button>
						<button type="submit" class="main-btn">Join Membership</button>
					</div>
				</form>
			</article>
			<!-- [E] 게시물 등록 -->
		</section>
	</div>
	<!-- [E] wrap -->
</body>
</html>

<script>
	// focusout 처리용 스크립트
	$('#email').focusout(function() {
		if (!document.userInfo.email.value) {
			alert("이메일 형식의 아이디를 입력하세요.");
			return false;
		}
		var asValue = document.userInfo.email.value;
		var regExp = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
		if (!regExp.test(asValue)) {
			alert("이메일 형식의 아이디를 입력하세요.");
			return false; // 형식에 맞는 경우 true 리턴	
		}
	})
	$('#password').focusout(function() {
		if (!document.userInfo.password.value) {
			alert("비밀번호를 입력하세요.");
			return false;
		}
		var asValue = document.userInfo.password.value;
		var regExp = /^(?=.*\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,10}$/; //  8 ~ 10자 영문, 숫자 조합
		if (!regExp.test(asValue)) {
			alert("password를 (8 ~ 10자 영문, 숫자 조합)형태로 입력하세요.");
			return false; // 형식에 맞는 경우 true 리턴	
		}
	})
	$('#passwordCheck').focusout(function() {
		if (!document.userInfo.passwordCheck.value) {
			alert("비밀번호 확인을 입력하세요.");
			return false;
		}
		if (document.userInfo.password.value != document.userInfo.passwordCheck.value) {
			alert("비밀번호와 비밀번호 확인을 동일하게 입력하세요.");
			return false;
		}
	})
	$('#nameFirst').focusout(function() {
		if (!document.userInfo.nameFirst.value) {
			alert("nameFirst을 등록하세요.");
			return false;
		}
	})
	$('#nameLast').focusout(function() {
		if (!document.userInfo.nameLast.value) {
			alert("nameLast을 등록하세요.");
			return false;
		}
	})
	$('#countryCode').focusout(function() {
		if (!$("select[name=countryCode]").val()) {
			alert("country를 선택하세요.");
			return false;
		}
	})
	$('#specialCode').focusout(function() {
		if (!$("select[name=specialCode]").val()) {
			alert("special을 선택하세요.");
			return false;
		}
	})
	$('#uploadFile_1').focusout(function() {
		if (!document.userInfo.uploadFile_1.value) {
			alert("의사 면허증 image를 등록하세요.");
			return false;
		}
	})
	$('#uploadFile_2').focusout(function() {
		if (!document.userInfo.uploadFile_2.value) {
			alert("의사 면허증2 image를 등록하세요.");
			return false;
		}
	})
	$('#partnerName').focusout(function() {
		if (!document.userInfo.partnerName.value) {
			alert("partner name을 등록하세요.");
			return false;
		}
	})
</script>